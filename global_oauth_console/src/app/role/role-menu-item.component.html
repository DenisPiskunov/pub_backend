<div class="p-grid">
	<div class="card p-fluid" style="width: 100%">
		<div class="p-col-12">
			<p-table [value]="roles" [paginator]="true" [rows]="10"
					 [rowsPerPageOptions]="[10,15,25,50,100]" [lazy]="true"
					 (onLazyLoad)="loadRoles($event)"
					 [lazyLoadOnInit]="false" [totalRecords]="totalCount"
					 styleClass="p-datatable-customers p-datatable-gridlines p-datatable-striped p-datatable-sm">
				<ng-template pTemplate="caption">
					<div translate class="p-d-flex p-jc-md-between table-header">
						left-menu.menu-item.role.table.header
						 <div class="table-btn">
							 <button *ngIf="uiElementAccessDecisionManager.hasAccessToCreate()"
									 pButton (click)="createRole()" class="p-button-success"
									 [label]="'common.menu-item.button.new' | translate" icon="pi pi-plus"></button>
							 <button pButton (click)="paginate()" [label]="'common.menu-item.button.update' | translate" icon="pi pi-refresh"></button>
						 </div>
					</div>
				</ng-template>
				<ng-template pTemplate="header">
					<tr>
						<th style="width: 5em">Id</th>
						<th translate style="width: 20em">left-menu.menu-item.role.table.name</th>
						<th translate style="width: 5em">common.menu-item.settings</th>
					</tr>
				</ng-template>
				<ng-template pTemplate="body" let-role>
					<tr [pSelectableRow]="role" [ngClass]="{'table-row-disabled': role.isDeleted}">
						<td>
							<span class="p-column-title">Id</span>
							<div>{{role.id}}</div>
						</td>
						<td>
							<span translate class="p-column-title">left-menu.menu-item.role.table.name</span>
							<div>{{role.name}}</div>
						</td>
						<td *ngIf="!role.isDeleted">
							<span translate class="p-column-title">common.menu-item.settings</span>

							<button *ngIf="uiElementAccessDecisionManager.hasAccessToEdit()" pButton (click)="editRole(role.id)"
									icon="pi pi-pencil" class="p-mr-2 p-mb-2"
									[pTooltip]="'common.menu-item.tooltip.edit' | translate"
									tooltipPosition="bottom"></button>
							<button *ngIf="uiElementAccessDecisionManager.hasAccessToDelete()" pButton (click)="confirmDeleting(role)"
									icon="pi pi-fw pi-trash" class="p-button-secondary p-mr-2 p-mb-2"
									[pTooltip]="'common.menu-item.tooltip.delete' | translate"
									tooltipPosition="bottom"></button>
						</td>
						<td translate *ngIf="role.isDeleted">
							<span style="padding-right: 3px" class="pi pi-fw pi-ban"></span>
							common.menu-item.deleted-item
						</td>
					</tr>
				</ng-template>
				<ng-template pTemplate="emptymessage">
					<tr>
						<td translate colspan="3">left-menu.menu-item.role.table.empty</td>
					</tr>
				</ng-template>
			</p-table>
		</div>
	</div>
</div>

<app-role-popup (afterSave)="afterSave()"></app-role-popup>

<p-confirmDialog [header]="'confirm-dialog.role.delete.title' | translate"
				 icon="pi pi-exclamation-triangle" [message]="'confirm-dialog.role.delete.text' | translate"
				 [acceptLabel]="'common.confirm-dialog.button.accept' | translate"
				 [rejectLabel]="'common.confirm-dialog.button.reject' | translate"
				 [style]="{width: '425px'}" acceptButtonStyleClass="p-button-text"
				 rejectButtonStyleClass="p-button-text"></p-confirmDialog>

