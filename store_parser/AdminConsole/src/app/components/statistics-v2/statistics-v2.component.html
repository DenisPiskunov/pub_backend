<app-top-menu></app-top-menu>
<div class="container-fluid">
    <app-left-menu>Loading left-menu...</app-left-menu>
    <div class="ui-md-offset-2">
        <p-blockUI [blocked]="blockedDocument"></p-blockUI>

        <div style="height: 1em" class="ui-g-12"></div>
        <div class="ui-g-12">
            <div class="ui-md-offset-1 ui-g-9">
                <div class="panel panel-default">
                    <div class="panel-heading align-center">
                        <h5>Интервал выборки для получения статистики по активным/добавленным/удаленным приложениям</h5>
                    </div>
                    <div class="panel-body">
                        <div class="ui-g-6 align-center">
                            <h6>Начало интервала выборки</h6>
                            <p-calendar [(ngModel)]="fromDate"></p-calendar>
                        </div>
                        <div class="ui-g-6 align-center">
                            <h6>Окончание интервала выборки</h6>
                            <p-calendar [(ngModel)]="toDate"></p-calendar>
                        </div>
                        <div class="ui-grid-col-12" style="height: 1.5em"></div>
                        <div class="ui-grid-col-12">
                            <div class="ui-grid-col-6">
                                <p-checkbox name="groupname" [(ngModel)]="showAndroidActive" binary="true" label="Активные приложения Android"></p-checkbox>
                            </div>
                            <div class="ui-grid-col-6">
                                <p-checkbox name="groupname" [(ngModel)]="showIOSActive" binary="true" label="Активные приложения iOS"></p-checkbox>
                            </div>
                            <div class="ui-grid-col-6">
                                <p-checkbox name="groupname" [(ngModel)]="showAndroidAdded" binary="true" label="Добавленные приложения Android"></p-checkbox>
                            </div>
                            <div class="ui-grid-col-6">
                                <p-checkbox name="groupname" [(ngModel)]="showIOSAdded" binary="true" label="Добавленные приложения iOS"></p-checkbox>
                            </div>
                            <div class="ui-grid-col-6">
                                <p-checkbox name="groupname" [(ngModel)]="showAndroidDeleted" binary="true" label="Удаленные приложения Android"></p-checkbox>
                            </div>
                            <div class="ui-grid-col-6">
                                <p-checkbox name="groupname" [(ngModel)]="showIOSDeleted" binary="true" label="Удаленные приложения iOS"></p-checkbox>
                            </div>
                        </div>
                        <div class="ui-grid-col-12" style="height: 1.5em"></div>

                        <div class="ui-grid-col-12 align-center">
                            <button pButton type="button" label="Построить выборку" icon="fa-check"
                                    iconPos="right" (click)="onGetStatisticsBundle()"></button>
                        </div>
                    </div>
                </div>
            </div>

            <div [hidden]="hideChart">
                <div class="ui-grid-col-12" style="height: 0.5em"></div>
                <div class="ui-grid-col-9 ui-md-offset-1 align-center">
                    <h4>Результат выборки по приложениям</h4>
                </div>
                <div [hidden]="hideChart" class="ui-grid-col-11">
                    <p-chart type="line" [data]="chartData"></p-chart>
                </div>
            </div>

            <div class="ui-grid-col-12" style="height: 2em"></div>
            <div class="ui-grid-col-9 ui-md-offset-1" [hidden]="hideChart">
                <div class="ui-grid-col-12 align-center">
                    <h4>Результат выборки по приложениям</h4>
                </div>
                <p-dataTable [value]="statTableData" selectionMode="single" [paginator]="true" rows="50"
                             [responsive]="true">
                    <p-column field="date" header="Дата выборки" [sortable]="true"></p-column>
                    <p-column field="platform" header="Платформа" [sortable]="true"></p-column>
                    <p-column field="activeCount" header="Количество активных приложений" [sortable]="true"></p-column>
                    <p-column field="addedCount" header="Количество добавленных приложений" [sortable]="true"></p-column>
                    <p-column field="deletedCount" header="Количество удаленных приложений" [sortable]="true"></p-column>
                    <p-column field="percentage" header="% удаленных приложений" [sortable]="true"></p-column>
                </p-dataTable>
            </div>
        </div>
    </div>


    <div [hidden]="hideProgress" class="ui-g-12 text-center">
        <p-progressSpinner></p-progressSpinner>
    </div>
</div>
